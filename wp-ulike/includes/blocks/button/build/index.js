(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var l in n)e.o(n,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:n[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,n=window.wp.blocks,l=window.wp.blockEditor,o=window.wp.data,a=window.wp.components,i=window.wp.i18n,r=window.wp.serverSideRender;var s=e.n(r);const p=window.wp.element,u=window.wp.apiFetch;var c=e.n(u);const m=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"wp-ulike/button","title":"WP ULike Button","category":"wp-ulike","icon":"heart","description":"Add like/dislike buttons to your posts with customizable styles and templates.","keywords":["like","rating","vote","engagement","feedback","button"],"textdomain":"wp-ulike","editorScript":"file:./build/index.js","editorStyle":"file:./build/index.css","attributes":{"for":{"type":"string","default":"post"},"itemId":{"type":"string","default":""},"useCurrentPostId":{"type":"boolean","default":true},"template":{"type":"string","default":""},"buttonType":{"type":"string","default":""}},"supports":{"html":false,"align":true,"className":true},"usesContext":["postId","commentId"]}');(0,n.getBlockType)(m.name)||(0,n.registerBlockType)(m.name,{...m,edit:({attributes:e,setAttributes:n,isSelected:r,clientId:u})=>{const m=(0,l.useBlockProps)(),{for:d,itemId:w,useCurrentPostId:b,template:_,buttonType:y}=e,[g,k]=(0,p.useState)([]),[f,h]=(0,p.useState)((0,i.__)("Use Settings Default","wp-ulike")),[x,E]=(0,p.useState)(!0),I=(0,o.useSelect)(e=>{if(!u)return!1;const{getBlockParents:t,getBlockName:n}=e("core/block-editor");return t(u).some(e=>"core/comment-template"===n(e))},[u]),v=[{label:(0,i.__)("Post","wp-ulike"),value:"post"},{label:(0,i.__)("Comment","wp-ulike"),value:"comment"}];(0,p.useEffect)(()=>{let e=!0;return(async()=>{try{const t=await c()({path:"/wp-ulike/v1/templates"});if(!e)return;t&&t.templates&&Array.isArray(t.templates)?(k(t.templates),t.default_template_name&&h(t.default_template_name)):t&&Array.isArray(t)&&k(t)}catch(t){e&&(console.error("Error fetching templates:",t),k([]))}finally{e&&E(!1)}})(),()=>{e=!1}},[]);const C=[{key:"",name:f,symbol:"",is_text_support:!0},...g],D=C.find(e=>e.key===_),S=!D||!1!==D.is_text_support,B=[{label:(0,i.__)("Default","wp-ulike"),value:""},{label:(0,i.__)("Image","wp-ulike"),value:"image"}];return S&&B.push({label:(0,i.__)("Text","wp-ulike"),value:"text"}),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(l.InspectorControls,null,(0,t.createElement)(a.PanelBody,{title:(0,i.__)("Settings","wp-ulike"),initialOpen:!0},"comment"===d&&!I&&(0,t.createElement)("div",{style:{marginBottom:"20px"}},(0,t.createElement)(a.Notice,{status:"info",isDismissible:!1,className:"wp-ulike-comment-context-notice"},(0,i.__)("Comment buttons work best when placed inside a Comment Template block. They will automatically use the current comment ID.","wp-ulike"))),(0,t.createElement)(a.SelectControl,{label:(0,i.__)("Item Type","wp-ulike"),value:d,options:v,onChange:e=>n({for:e}),help:(0,i.__)("Select the type of content to add interactive like/dislike buttons to.","wp-ulike"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,t.createElement)(a.ToggleControl,{label:(0,i.__)("Use Current Item ID","wp-ulike"),checked:b,onChange:e=>n({useCurrentPostId:e}),help:b?(0,i.__)("Automatically uses the current post or comment ID. You can optionally add a custom ID below to combine with it.","wp-ulike"):(0,i.__)("Disable to use a custom item ID instead of the current one.","wp-ulike"),__nextHasNoMarginBottom:!0}),(0,t.createElement)(a.TextControl,{label:(0,i.__)("Custom Item ID","wp-ulike"),value:w,onChange:e=>n({itemId:e}),help:b?(0,i.__)("Optional: Enter a number to combine with the current item ID. Example: If current ID is 42 and you enter 100, the final ID will be 42100. Useful for creating multiple interactive buttons on the same post. Note: Custom combined IDs will not appear in statistics/insights.","wp-ulike"):(0,i.__)("Enter a specific item ID to use. Leave empty to automatically detect the current item ID. Note: Custom IDs will not appear in statistics/insights.","wp-ulike"),type:"number",placeholder:b?(0,i.__)("Leave empty or enter number to combine","wp-ulike"):(0,i.__)("Enter item ID","wp-ulike"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,t.createElement)("div",{className:"wp-ulike-template-selector",style:{marginBottom:"15px"}},(0,t.createElement)("label",{className:"components-base-control__label",style:{marginBottom:"8px",display:"block"}},(0,i.__)("Select a Template","wp-ulike")),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(85px, 1fr))",gap:"6px",marginBottom:"8px"}},C.map(e=>{const l=_===e.key;return(0,t.createElement)("button",{key:e.key||"default",type:"button",onClick:()=>n({template:e.key}),className:"wp-ulike-template-option "+(l?"is-selected":""),style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"10px 8px",border:"1.5px solid "+(l?"#0073aa":"#ddd"),borderRadius:"3px",background:"#fff",cursor:"pointer",transition:"border-color 0.15s ease"},onMouseEnter:e=>{l||(e.currentTarget.style.borderColor="#bbb")},onMouseLeave:e=>{l||(e.currentTarget.style.borderColor="#ddd")},title:e.name},(0,t.createElement)("div",{style:{width:"50px",height:"50px",marginBottom:"6px",display:"flex",alignItems:"center",justifyContent:"center"}},e.symbol?(0,t.createElement)("img",{src:e.symbol,alt:e.name,style:{width:"50px",height:"50px",objectFit:"contain",filter:l?"brightness(40%) sepia(100%) hue-rotate(170deg) saturate(250%)":"none",transition:"filter 0.15s ease"}}):(0,t.createElement)(a.Icon,{icon:"admin-settings",size:32,style:{filter:l?"brightness(40%) sepia(100%) hue-rotate(170deg) saturate(250%)":"none",transition:"filter 0.15s ease",color:"#646970"}})),(0,t.createElement)("span",{style:{fontSize:"10px",textAlign:"center",color:l?"#0073aa":"#666",fontWeight:"400",lineHeight:"1.3",wordBreak:"break-word"}},e.name))}))),_&&!1!==S&&(0,t.createElement)(a.SelectControl,{label:(0,i.__)("Button Type","wp-ulike"),value:y,options:B,onChange:e=>n({buttonType:e}),help:(0,i.__)("Choose whether to display an image icon or text label.","wp-ulike"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}))),(0,t.createElement)("div",{...m},(0,t.createElement)(s(),{block:"wp-ulike/button",attributes:e,LoadingResponsePlaceholder:()=>(0,t.createElement)("div",{style:{padding:"20px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",minHeight:"60px"}},(0,t.createElement)(a.Spinner,null),(0,t.createElement)("span",{style:{color:"#757575",fontSize:"13px"}},(0,i.__)("Loading preview...","wp-ulike"))),ErrorResponsePlaceholder:()=>(0,t.createElement)("div",{style:{padding:"20px",textAlign:"center",color:"#cc1818",fontSize:"13px"}},(0,i.__)("Error loading WP ULike button preview.","wp-ulike"))})))},save:()=>null})})();